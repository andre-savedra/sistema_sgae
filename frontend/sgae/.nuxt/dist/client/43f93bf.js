(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{443:function(t,e,n){"use strict";var r=n(12);n(66);e.a={asyncData:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$auth,t.$router,e.next=3,n.$storage.getUniversal("actualUserStoraged");case 3:if(!(r=e.sent)){e.next=8;break}return console.log("Storaged already defined extends"),console.log(r),e.abrupt("return",{actualUser:r});case 8:case"end":return e.stop()}}),e)})))()}}},449:function(t,e,n){t.exports=n.p+"img/postit.6ca5453.jpg"},452:function(t,e,n){"use strict";(function(t){var r=n(453),o=n.n(r);e.a={awsManager:function(){console.log("AWS S3 MANAGER RUNNING");var e={bucketName:t.env.NUXT_ENV_BUCKET_NAME,dirName:t.env.NUXT_ENV_DIR_NAME_TASK,region:t.env.NUXT_ENV_REGION,accessKeyId:t.env.NUXT_ENV_ACCESSKEY_ID,secretAccessKey:t.env.NUXT_ENV_SECRET_ACESSKEY_ID,s3Url:"https://"+t.env.NUXT_ENV_BUCKET_NAME+".s3.amazonaws.com"};return new o.a(e)}}}).call(this,n(172))},460:function(t,e,n){var content=n(512);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("6dcb4104",content,!0,{sourceMap:!1})},511:function(t,e,n){"use strict";n(460)},512:function(t,e,n){var r=n(10),o=n(137),l=n(449),c=r(!1),d=o(l);c.push([t.i,".all[data-v-49378c70]{height:auto;min-height:calc(100vh - var(--height-default-header));width:100vw;max-width:100vw;padding:70px 90px;background-size:cover;background-position:50%;background-repeat:no-repeat;background-image:url("+d+")}.all *[data-v-49378c70]{overflow-x:visible}.all img[data-v-49378c70]{max-width:400px!important;max-height:400px!important}.all .titulo[data-v-49378c70],.all .titulo1[data-v-49378c70]{font-size:15px}.all .containerTask[data-v-49378c70]{width:70vw;background-color:#fff;border-radius:15px}.all .containerTask .titulo[data-v-49378c70]{width:100%;height:80px;font-weight:700;background-color:#c22a1f;padding-left:40px;color:#fff;border-radius:15px 15px 0 0;background:linear-gradient(-15deg,#313131,#525d69,#c22a1f,#bd244a);background-size:300% 300%;-webkit-animation:gradientPosition-data-v-49378c70 7s ease infinite;animation:gradientPosition-data-v-49378c70 7s ease infinite}.all .containerTask .titulo i[data-v-49378c70]{font-size:25px;width:auto;height:auto;margin-right:10px}.all .containerTask .form[data-v-49378c70]{background-color:#fff;width:100%;height:auto;padding:20px 15px;border-radius:0 0 15px 15px}.all .containerTask .form .titulo1 #task[data-v-49378c70]{color:#99180f}.all .containerTask .form .titulo1 h2[data-v-49378c70],.all .containerTask .form .titulo1 i[data-v-49378c70]{width:auto}.all .containerTask .form .titulo1 i[data-v-49378c70]{font-size:18px}.all .containerTask .form .element[data-v-49378c70]{height:auto;width:100%;padding:20px 0}.all .containerTask .form .element .frameGeneralInfo[data-v-49378c70]{width:100%;max-width:100%;border:2px solid #99180f;height:auto;border-radius:7px;padding:10px;box-shadow:0 3px 6px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.17)}.all .containerTask .form .element .frameGeneralInfo .lblBasic .p-avatar-lg[data-v-49378c70]{width:4rem;height:3.5rem}.all .containerTask .form .element .frameGeneralInfo .customAutocomplete[data-v-49378c70]{width:48%}.all .containerTask .form .element .frameGeneralInfo .customAutocomplete .lblBasic[data-v-49378c70]{margin:7px 0}.all .containerTask .form .element .frameGeneralInfo .textInput[data-v-49378c70]{border:none!important;background-color:#ffdfdf;font-weight:700}.all .containerTask .form .element .frameGeneralInfo .taskGallery[data-v-49378c70]{width:95%;max-width:95%;height:360px}.all .containerTask .form .element .frameGeneralInfo .taskGallery .customContainer[data-v-49378c70]{height:310px;width:100%}.all .containerTask .form .element .frameGeneralInfo .timeprogress[data-v-49378c70]{width:100%}.all .containerTask .form .element .frameGeneralInfo .timeprogress .p-timeline-event .custom-marker[data-v-49378c70]{width:auto!important;height:auto!important;cursor:pointer!important}.all .containerTask .form .element .frameGeneralInfo .timeprogress .p-timeline-event .custom-marker .timeicon[data-v-49378c70]{font-size:23px;font-weight:700;width:46px;min-width:46px;height:36px;min-height:36px;border-radius:30px!important;display:table-cell;text-align:center;vertical-align:middle;color:#000}.all .containerTask .form .element .frameGeneralInfo .timeprogress .p-timeline-event .custom-marker .timeicon[data-v-49378c70]:hover{color:#5a5050}.all .containerTask .form .element .basicInputText[data-v-49378c70]{outline:0;box-shadow:none;border:none;border-bottom:2px solid #000;border-radius:0}.all .containerTask .form .element .lblBasic[data-v-49378c70]{margin:15px 0;display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.all .containerTask .form .element .lblBasic .pi[data-v-49378c70]{width:auto;margin-right:10px;font-weight:700}.all .containerTask .form .element #name[data-v-49378c70],.all .containerTask .form .element #requester[data-v-49378c70]{width:80%;margin-left:15px}.all .containerTask .form .element #description[data-v-49378c70]{width:95%;margin-left:15px;height:120px;border-radius:15px;border:2px solid #000;padding:10px;outline:none;word-break:break-all;resize:none}.all .containerTask .divisor[data-v-49378c70]{margin-top:30px;background-color:red;width:96%;height:2px;z-index:100}.all .buttons[data-v-49378c70]{width:70vw;display:flex;flex-direction:row;justify-content:space-evenly;padding:12px}.all .buttons .btn-clean[data-v-49378c70],.all .buttons .btn-send[data-v-49378c70]{width:30%;border-radius:10px;padding:20px;font-size:1.8rem;font-weight:700;margin:40px 0;transition:all .3s}.all .buttons .btn-clean[data-v-49378c70]:hover,.all .buttons .btn-send[data-v-49378c70]:hover{transform:scale(1.03);cursor:pointer;transition:all .3s}.all .buttons .btn-send[data-v-49378c70]{background-color:#c22a1f;border:none;color:#fff}.all .buttons .btn-clean[data-v-49378c70]{background-color:#fff;border:2px solid #c22a1f;color:#c22a1f}.all .progressButtonsContainer[data-v-49378c70]{width:100%;height:45px;margin:20px 0}.all .progressButtonsContainer .btn-adv-progress[data-v-49378c70]{width:70%;height:100%;border-radius:5px;padding:20px;font-size:1.2rem;font-weight:700;transition:all .3s;background-color:#c22a1f!important;border:none;color:#fff}.all .progressButtonsContainer .btn-adv-progress[data-v-49378c70]:hover{transform:scale(1.03);cursor:pointer;transition:all .3s}@-webkit-keyframes gradientPosition-data-v-49378c70{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}@keyframes gradientPosition-data-v-49378c70{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}@media screen and (max-width:945px){.titulo[data-v-49378c70],.titulo1[data-v-49378c70]{font-size:13px}.buttons[data-v-49378c70],.containerTask[data-v-49378c70]{width:80vw!important}.buttons .btn-clean[data-v-49378c70],.buttons .btn-send[data-v-49378c70]{width:38%;font-size:16px!important}}@media screen and (max-width:760px){.taskGallery[data-v-49378c70]{height:320px!important}.taskGallery .customContainer[data-v-49378c70]{height:280px!important}.timeprogress .p-timeline-event .p-timeline-event-content span[data-v-49378c70]{font-size:13px!important}.timeprogress .p-timeline-event .custom-marker .timeicon[data-v-49378c70]{font-size:18px!important;width:39px!important;min-width:39px!important;height:35px!important;min-height:35px!important}}@media screen and (max-width:610px){.all .containerTask .divisor[data-v-49378c70]{margin-top:35px!important}.taskGallery[data-v-49378c70]{height:290px!important}.taskGallery .customContainer[data-v-49378c70]{height:270px!important}.titulo[data-v-49378c70],.titulo1[data-v-49378c70]{font-size:11px!important}.buttons[data-v-49378c70],.containerTask[data-v-49378c70]{width:87vw!important}.buttons .btn-clean[data-v-49378c70],.buttons .btn-send[data-v-49378c70]{width:30%!important;font-size:16px!important}.customDatePicker[data-v-49378c70]{width:50%!important;margin-left:15px}}@media screen and (max-width:540px){.buttons button[data-v-49378c70]{margin:15px 0!important}.lblBasic .p-avatar-lg[data-v-49378c70]{width:3.5rem!important;height:3rem!important}.frameGeneralInfo .lblBasic[data-v-49378c70],.frameGeneralInfo .pBasic[data-v-49378c70],.inputElement .lblBasic strong[data-v-49378c70]{font-size:13px!important}.taskGallery[data-v-49378c70]{height:260px!important}.taskGallery .customContainer[data-v-49378c70]{height:250px!important}.all[data-v-49378c70]{padding:0!important}.containerTask[data-v-49378c70]{width:100vw!important}.containerTask[data-v-49378c70],.titulo[data-v-49378c70]{border-radius:0!important}.buttons[data-v-49378c70]{width:100vw!important}.buttons .btn-clean[data-v-49378c70],.buttons .btn-send[data-v-49378c70]{width:30%!important;font-size:15px!important}.customDatePicker[data-v-49378c70]{width:60%!important;margin-left:15px}.timeprogress .p-timeline-event .timedate[data-v-49378c70],.timeprogress .p-timeline-event .timename[data-v-49378c70]{display:none}}@media screen and (max-width:450px){.all[data-v-49378c70]{background:#fff}.taskGallery[data-v-49378c70]{height:240px!important}.taskGallery .customContainer[data-v-49378c70]{height:230px!important}}@media screen and (max-width:390px){.progressButtonsContainer .btn-adv-progress[data-v-49378c70]{font-size:15px!important;padding:10px}.timeprogress .p-timeline-event .custom-marker .timeicon[data-v-49378c70]{font-size:16px!important;width:30px!important;min-width:30px!important;height:30px!important;min-height:30px!important}.buttons button[data-v-49378c70]{margin:0!important}.lblBasic .p-avatar-lg[data-v-49378c70]{width:3rem!important;height:2.5rem!important}.taskGallery[data-v-49378c70]{height:210px!important}.taskGallery .customContainer[data-v-49378c70]{height:200px!important}}@media screen and (max-width:315px){.buttons button[data-v-49378c70]{height:20px!important;padding:17px 7px!important}.lblBasic .p-avatar-lg[data-v-49378c70]{width:2.5rem!important;height:2rem!important}.titulo[data-v-49378c70],.titulo1[data-v-49378c70]{font-size:10px!important}.titulo1 i[data-v-49378c70],.titulo i[data-v-49378c70]{font-size:17px!important}.titulo[data-v-49378c70]{padding-left:20px!important}.taskGallery[data-v-49378c70]{height:180px!important}.taskGallery .customContainer[data-v-49378c70]{height:170px!important}}@media screen and (max-width:275px){.taskGallery[data-v-49378c70]{height:160px!important}.taskGallery .customContainer[data-v-49378c70]{height:150px!important}}",""]),t.exports=c},547:function(t,e,n){"use strict";n.r(e);var r,o,l,c,d,m,f,h,v,k,x,w=n(12),T=(n(66),n(31),n(18),n(67),n(9),n(54),n(80),n(89),n(50),n(448),n(81),n(36),n(25),n(29),n(271),n(35),n(444),n(53),n(443)),_=n(452),C={extends:T.a,name:"andamentoTarefa",layout:"standard",middleware:"auth",data:function(){return{progressAllowed:"",emailPayload:null,viewMode:"overview",taskID:1,initialStatus:1,deadline:null,photos:[[],[]],filesToBeUploaded:null,S3Client:null,task:null,actualUser:{id:null,nome:null},taskStatus:null,taskStatusArray:[],newTaskStatusName:"",newTaskStatus:{idStatusFK:0,idTarefaFK:0,data:"",descricao:""},iconArrayStatus:["pi-file","pi-users","pi-check-circle","pi-flag","pi-tags","pi-folder"],colorNotConcluded:"#d44f46",colorConcluded:"#77c758"}},methods:{limitText:function(data,t){return null!=data&&data.length>t?data.slice(0,t)+"...":data},limitName:function(data){if(null!=data){var t=data.split(" ");return t[0]+" "+t[t.length-1]}return data},cleanForm:function(){this.virtualClickUpload("Cancelar")},formatNumber:function(input){return input>=0&&input<=9?"0"+input.toString():input.toString()},formatDate:function(input){var dt=new Date;if(null===input)return input;if("frontend"===input)return this.formatNumber(dt.getDate())+"/"+this.formatNumber(dt.getMonth()+1)+"/"+dt.getFullYear()+" - "+this.formatNumber(dt.getHours())+":"+this.formatNumber(dt.getMinutes());if("backend"===input)return dt.getFullYear()+"-"+this.formatNumber(dt.getMonth()+1)+"-"+this.formatNumber(dt.getDate())+"T"+this.formatNumber(dt.getHours())+":"+this.formatNumber(dt.getMinutes())+":00.000000-03:00";if(input.includes("GMT"))return new Date(input).toISOString().replaceAll("Z","-03:00");if(input.includes("T")){var t=input.split("T"),e=t[0].split("-");3===e.length&&(t[0]=e[2]+"/"+e[1]+"/"+e[0]);var n=t[1].split(":");return n.length>=2&&(t[1]=n[0]+":"+n[1]),t[0]+" - "+t[1]}if(input.includes("/")){var r=input.split("-");r[0]=r[0].trim().replaceAll("/","-"),r[1]=r[1].trim().replaceAll("/","-");var o=r[0].split("-");return 3===o.length&&(r[0]=o[2]+"-"+o[1]+"-"+o[0]),r[0]+"T"+r[1]+":00-03:00"}return input},virtualClickUpload:function(t){console.log("VIRTUAL CLICK");var e=document.querySelectorAll(".p-fileupload-buttonbar button");console.log(e),e.forEach((function(element,e){element.textContent.includes(t)&&(console.log("clicou!"),element.click())}))},progressTaskSubmit:(x=Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.progressAllowed="",t.next=3,Promise.all([this.postTaskStatus()]);case 3:if(t.sent,"ok"!==this.progressAllowed){t.next=36;break}t.t0=this.newTaskStatusName,t.next="Em andamento"===t.t0?8:"Concluída"===t.t0?18:"Encerrada"===t.t0?24:34;break;case 8:return t.next=10,Promise.all([this.putTask()]);case 10:return t.sent,this.emailPayload=[structuredClone(this.newTaskStatus)],this.viewMode="overview",this.cleanNewStatus(),this.getTaskUser(this.taskID),this.getStatusType(),this.postMail(this.emailPayload),t.abrupt("break",34);case 18:return t.next=20,Promise.all([this.putTask(),this.virtualClickUpload("Carregar")]);case 20:return t.sent,this.emailPayload=[structuredClone(this.newTaskStatus)],this.postMail(this.emailPayload),t.abrupt("break",34);case 24:return t.next=26,Promise.all([this.putTask(!0)]);case 26:return t.sent,this.emailPayload=[structuredClone(this.newTaskStatus)],this.viewMode="overview",this.cleanNewStatus(),this.getTaskUser(this.taskID),this.getStatusType(),this.postMail(this.emailPayload),t.abrupt("break",34);case 34:t.next=37;break;case 36:"permission"===this.progressAllowed?alert("Você não tem permissão para alterar esta tarefa ou concluí-la"):alert("Não foi possível alterar a tarefa!");case 37:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)}),postTask:(k=Object(w.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.task[0].idSolicitanteFK=this.actualUser.id,this.task[0].prazo=this.formatDate(this.deadline.toString()),this.task[0].dataInicio=this.formatDate("backend"),this.task[0].idStatusFK=1,t.next=7,this.$axios.$post(this.$store.state.BASE_URL+"tarefas/",JSON.stringify(this.task),{headers:{"Content-Type":"application/json"}}).then((function(t){console.log(t),t[0].nome===e.task[0].nome&&t[0].id>0&&(e.taskID=t[0].id,e.postTaskUsers())})).catch((function(t){alert("Problema ao tentar cadastrar a tarefa"),console.log(t)}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return k.apply(this,arguments)}),putTask:(v=Object(w.a)(regeneratorRuntime.mark((function t(e){var body;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("atualizando put task"),body={idStatusFK:this.newTaskStatus.idStatusFK,dataFim:e?this.newTaskStatus.data:null,dataInicio:this.task[0].idTarefaFK.dataInicio,idAmbienteFK:this.task[0].idTarefaFK.idAmbienteFK.id,idSolicitanteFK:this.task[0].idTarefaFK.idSolicitanteFK.id,nome:this.task[0].idTarefaFK.nome,descricao:this.task[0].idTarefaFK.descricao,prazo:this.task[0].idTarefaFK.prazo},console.log(body),t.next=6,this.$axios.$put(this.$store.state.BASE_URL+"tarefas/"+this.task[0].idTarefaFK.id+"/",JSON.stringify(body),{headers:{"Content-Type":"application/json"}}).then((function(t){console.log(t),console.log("Atualizado com sucesso!!!")})).catch((function(t){alert("Problema ao tentar cadastrar a tarefa"),console.log(t)}));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)}),postTaskStatus:(h=Object(w.a)(regeneratorRuntime.mark((function t(){var body,e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("tentando salvar taskSTATUS"),this.newTaskStatus.descricao+=" - ("+this.limitName(this.actualUser.nome)+")",body=[this.newTaskStatus],console.log(body),t.next=6,this.$axios.$post(this.$store.state.BASE_URL+"tarefasStatus/",JSON.stringify(body),{headers:{"Content-Type":"application/json"}}).then((function(t){console.log(t),"Atualizado com sucesso"===t.msg?e.progressAllowed="ok":e.progressAllowed="permission"})).catch((function(t){alert("Problema ao tentar cadastrar status da tarefa"),console.log(t),e.progressAllowed="error"}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)}),savePhotoAWS:(f=Object(w.a)(regeneratorRuntime.mark((function t(e){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.filesToBeUploaded=e.files,n=[],r=!1,t.next=5,Promise.all(this.filesToBeUploaded.map(function(){var t=Object(w.a)(regeneratorRuntime.mark((function t(e,l){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=o.task[0].idTarefaFK.id.toString()+"-"+o.newTaskStatus.idStatusFK.toString()+"-"+l.toString(),t.next=3,o.S3Client.uploadFile(e,c).then((function(t){console.log("save aws file "+l),console.log(t),n.push(t)})).catch((function(t){console.error(t),r=!0}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 5:n.length>0&&!1===r?this.postPhoto(n):alert("erro  ao salvar na aws s3");case 6:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)}),postPhoto:(m=Object(w.a)(regeneratorRuntime.mark((function t(e){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.task[0].idTarefaFK.id,r=this.newTaskStatus.idStatusFK,t.next=4,e.forEach((function(t){var e=new FormData;e.append("nome",t.key),e.append("idTarefaFK",n),e.append("idStatusFK",r),e.append("image",t.location),o.$axios.$post(o.$store.state.BASE_URL+"fotos/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),o.viewMode="overview",o.cleanNewStatus(),o.getTaskUser(o.taskID),o.getTaskPhotos(o.taskID),o.getStatusType()})).catch((function(t){alert("Problema ao tentar cadastrar  foto"),console.log(t)}))}));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)}),myUploader:(d=Object(w.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("my custom uploader..."),console.log(e);case 2:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)}),getTaskStatus:(c=Object(w.a)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$axios.$get(this.$store.state.BASE_URL+"tarefasStatus/?tarefa="+e).then((function(t){console.log(t),null!==t.data&&void 0!==t.data&&(n.taskStatus=structuredClone(t.data),n.taskStatus.map((function(t,e){n.taskStatusArray[e].data=t.data,n.taskStatusArray[e].color=n.colorConcluded,n.taskStatusArray[e].descricao=null===t.descricao?"":t.descricao})),console.log(n.taskStatus),console.log("finalizado get task status"),console.log("array status completo"),console.log(n.taskStatusArray))})).catch((function(t){alert("Problema ao tentar pegar status da tarefa "+e),console.log(t)}));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)}),getStatusType:(l=Object(w.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.taskStatusArray.length=0,this.$axios.$get(this.$store.state.BASE_URL+"status/").then((function(t){console.log(t),null!==t.data&&void 0!==t.data&&(e.taskStatusArray.length=0,t.data.map((function(t,n){e.taskStatusArray.push({id:t.id,nome:t.nome,data:" ",color:e.colorNotConcluded,icon:e.iconArrayStatus[n],showDialog:!1,descricao:""})})),console.log(e.taskStatusArray),console.log("finalizado get status TYPE"),e.getTaskStatus(e.taskID))})).catch((function(t){alert("Problema ao tentar pegar status type"),console.log(t)}));case 2:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)}),getTaskUser:(o=Object(w.a)(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$axios.$get(this.$store.state.BASE_URL+"tarefasUsuarios/?tarefaCompleta="+e).then((function(t){console.log(t),null!==t.data&&void 0!==t.data&&(n.task=null,n.task=structuredClone(t.data),console.log(n.task),console.log("finalizado gettaskuser"))})).catch((function(t){alert("Problema ao tentar pegar tarefa "+e),console.log(t)}));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)}),getTaskPhotos:function(t){var e=this;this.$axios.$get(this.$store.state.BASE_URL+"fotos/?tarefa="+t).then((function(t){null!==t.data&&void 0!==t.data&&(t.data.map((function(t){1===t.idStatusFK?e.photos[0].push(t):e.photos[1].push(t)})),console.log("FOTOS CARREGADAS"),console.log(e.photos))})).catch((function(e){alert("Problema ao tentar pegar FOTOS da tarefa "+t),console.log(e)}))},progressTaskButton:function(){var t=this;if(this.newTaskStatus.idStatusFK)this.taskStatusArray.map((function(e){t.newTaskStatus.idStatusFK===e.id&&(t.newTaskStatus.data=t.formatDate("backend"),e.data="overview"===t.viewMode?t.newTaskStatus.data:"",e.color="overview"===t.viewMode?t.colorConcluded:t.colorNotConcluded,t.viewMode="overview"===t.viewMode?"progress":"overview")}));else{var e=this.task[0].idTarefaFK.idStatusFK.id+1,n=!1;this.taskStatusArray.map((function(r){e===r.id&&(t.newTaskStatus.idStatusFK=r.id,t.newTaskStatus.data=t.formatDate("backend"),t.newTaskStatus.idTarefaFK=t.task[0].idTarefaFK.id,t.newTaskStatusName=r.nome,r.data=t.newTaskStatus.data,r.color=t.colorConcluded,t.viewMode="progress",n=!0)})),!1===n&&(this.newTaskStatus.idStatusFK=0,this.newTaskStatus.data="",this.newTaskStatus.idTarefaFK=0,this.newTaskStatusName="")}},postMail:(r=Object(w.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,this.$axios.$post(this.$store.state.BASE_URL+"emailSender/newTaskStatus/",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(t){console.log(t),null!==t.msg&&void 0!==t.msg&&("sent"===t.msg?console.log("EMAIL ENVIADO COM SUCESSO"):console.log("EMAIL NÃO ENVIADO"))})).catch((function(t){alert("Problema ao tentar enviar email!"),console.log(t)}));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),cleanNewStatus:function(){this.newTaskStatusName="",this.newTaskStatus.idStatusFK=0,this.newTaskStatus.idTarefaFK=0,this.newTaskStatus.data="",this.newTaskStatus.descricao=""}},created:function(){null===this.actualUser||void 0===this.actualUser?this.$router.push("/lobby"):(this.$store.state.editTaskId>0?this.taskID=this.$store.state.editTaskId:this.$router.push("/tarefas"),this.getTaskUser(this.taskID),this.getTaskPhotos(this.taskID),this.getStatusType(),this.S3Client=_.a.awsManager())}},S=C,y=(n(511),n(2)),component=Object(y.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all p-d-flex p-flex-column p-jc-center p-ai-center"},[n("div",{staticClass:"containerTask p-d-flex p-flex-column p-jc-top p-ai-center"},[t._m(0),t._v(" "),t.task?n("div",{staticClass:"form"},[n("div",{staticClass:"titulo1 p-d-flex p-flex-column p-jc-start p-ai-start"},[n("div",{staticClass:"titulo1 p-d-flex p-flex-row p-jc-start p-ai-start"},[n("h2",{attrs:{id:"task"}},[t._v("TAREFA: #"+t._s(this.task[0].idTarefaFK.id)+" -")]),t._v(" "),n("h2",[t._v(" "+t._s(this.task[0].idTarefaFK.nome))])]),t._v(" "),"overview"===t.viewMode?n("h4",{staticClass:"p-d-flex p-flex-row p-jc-start p-ai-start p-mt-3"},[n("i",{staticClass:"pi pi-exclamation-circle p-mr-2 p-ml-2"}),t._v("\n          Essas são as informações da tarefa atribuída à você! 👍\n        ")]):"Encerrada"===t.newTaskStatusName?n("h4",{staticClass:"p-d-flex p-flex-row p-jc-start p-ai-start p-mt-3"},[n("i",{staticClass:"pi pi-exclamation-circle p-mr-2 p-ml-2"}),t._v("\n          Reveja e finalize esta tarefa! 🏆\n        ")]):"Em andamento"===t.newTaskStatusName?n("h4",{staticClass:"p-d-flex p-flex-row p-jc-start p-ai-start p-mt-3"},[n("i",{staticClass:"pi pi-exclamation-circle p-mr-2 p-ml-2"}),t._v("\n          Sinalize que você está atuando nesta tarefa! 😉\n        ")]):n("h4",{staticClass:"p-d-flex p-flex-row p-jc-start p-ai-start p-mt-3"},[n("i",{staticClass:"pi pi-exclamation-circle p-mr-2 p-ml-2"}),t._v("\n          Dê andamento em sua tarefa! 🤩\n        ")])]),t._v(" "),n("main",{staticClass:"element p-d-flex p-jc-start p-ai-start"},[n("div",{staticClass:"subelement p-d-flex p-flex-column p-jc-center p-ai-center"},["overview"===t.viewMode?n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-row p-jc-center p-ai-start\n            "},[n("div",{staticClass:"\n                customAutocomplete\n                inputElement\n                p-d-flex p-flex-column p-jc-start p-ai-start\n              "},[t._m(1),t._v(" "),n("p",{staticClass:"lblBasic"},[t._v("\n                "+t._s(this.task[0].idTarefaFK.idAmbienteFK.nome)+"\n              ")])]),t._v(" "),n("div",{staticClass:"\n                customAutocomplete\n                inputElement\n                p-d-flex p-flex-column p-jc-start p-ai-start\n              "},[t._m(2),t._v(" "),n("p",{staticClass:"pBasic"},[t._v("\n                "+t._s(this.formatDate(this.task[0].idTarefaFK.prazo))+"\n              ")])])]):t._e(),t._v(" "),"overview"===t.viewMode?n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-row p-jc-center p-ai-start p-mt-4\n            "},[n("div",{staticClass:"\n                customAutocomplete\n                p-d-flex p-flex-column p-jc-start p-ai-start\n              "},[t._m(3),t._v(" "),n("label",{staticClass:"lblBasic",attrs:{for:"requester"}},[n("Avatar",{attrs:{image:this.task[0].idTarefaFK.idSolicitanteFK.image,size:"large",shape:"circle"}}),t._v(" "),n("strong",{staticClass:"p-ml-2"},[t._v(t._s(t.limitName(this.task[0].idTarefaFK.idSolicitanteFK.nome)))])],1)]),t._v(" "),n("div",{staticClass:"\n                customAutocomplete\n                inputElement\n                p-d-flex p-flex-column p-jc-start p-ai-start\n              "},[t._m(4),t._v(" "),t._l(t.task,(function(e,r){return n("div",{key:r},[n("label",{staticClass:"lblBasic",attrs:{for:"requester"}},[n("Avatar",{attrs:{image:e.idUsuarioFK.image,size:"large",shape:"circle"}}),t._v(" "),n("strong",{staticClass:"p-ml-2"},[t._v(t._s(t.limitName(e.idUsuarioFK.nome)))])],1)])}))],2)]):t._e(),t._v(" "),"overview"===t.viewMode?n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-row p-jc-center p-ai-start p-mt-4\n            "},[n("div",{staticClass:"\n                inputElement\n                p-d-flex p-flex-column p-jc-start p-ai-start\n              "},[t._m(5),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task[0].idTarefaFK.descricao,expression:"task[0].idTarefaFK.descricao"}],staticClass:"textInput p-mb-3",attrs:{type:"text",placeholder:"Insira aqui a descrição da sua tarefa...",id:"description",disabled:""},domProps:{value:t.task[0].idTarefaFK.descricao},on:{input:function(e){e.target.composing||t.$set(t.task[0].idTarefaFK,"descricao",e.target.value)}}})])]):t._e(),t._v(" "),"overview"===t.viewMode?n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-row p-jc-center p-ai-center p-mt-3\n            "},[n("div",{staticClass:"\n                taskGallery\n                p-d-flex p-flex-column p-jc-center p-ai-center\n              "},[t._m(6),t._v(" "),n("div",{staticClass:"customContainer"},[t.photos[0].length>0?n("CustomCarousel",{attrs:{photos:t.photos[0],background:"white",targetID:"CarouselAddTask"}}):t._e()],1)])]):t._e(),t._v(" "),n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-column p-jc-center p-ai-center p-mt-3\n            "},[t._m(7),t._v(" "),t.taskStatusArray?n("Timeline",{staticClass:"p-d-flex p-flex-row p-jc-center p-ai-start timeprogress",attrs:{value:t.taskStatusArray,layout:"horizontal",align:"top"},scopedSlots:t._u([{key:"opposite",fn:function(){},proxy:!0},{key:"content",fn:function(e){return[n("strong",[n("span",{staticClass:"timename"},[t._v(t._s(e.item.nome))])]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"timedate"},[t._v(t._s(t.formatDate(e.item.data)))])]}},{key:"marker",fn:function(e){return[n("span",{staticClass:"custom-marker shadow-2"},[n("i",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:e.item.nome+" - "+t.formatDate(e.item.data),expression:"\n                      slotProps.item.nome +\n                      ' - ' +\n                      formatDate(slotProps.item.data)\n                    ",modifiers:{top:!0}}],class:"timeicon pi "+e.item.icon,style:{backgroundColor:e.item.color},on:{click:function(t){e.item.showDialog=!e.item.showDialog}}})])]}}],null,!1,63086144)}):t._e()],1),t._v(" "),t.taskStatusArray?n("div",t._l(t.taskStatusArray,(function(dialog,e){return n("div",{key:e,staticClass:"timelineContainer"},[n("Dialog",{staticClass:"dialogTimeline",attrs:{header:"Progresso: "+dialog.nome,visible:dialog.showDialog,containerStyle:{width:"50vw"}},on:{"update:visible":function(e){return t.$set(dialog,"showDialog",e)}}},[n("div",{staticClass:"p-d-flex p-flex-column p-jc-start p-ai-start"},[n("div",{staticClass:"p-d-flex p-flex-row p-jc-start p-ai-start"},[n("strong",[n("span",{staticClass:"m-0"},[n("i",{class:"pi "+dialog.icon}),t._v(t._s(dialog.nome))])]),t._v(" "),n("strong",[n("p",{staticClass:"m-0"},[t._v("\n                        "+t._s(t.formatDate(dialog.data))+"\n                      ")])])]),t._v(" "),n("div",[t._v("\n                    "+t._s(dialog.descricao)+"\n                  ")])])])],1)})),0):t._e(),t._v(" "),"progress"===t.viewMode&&"Encerrada"===t.newTaskStatusName?n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-row p-jc-center p-ai-center p-mt-3\n            "},[n("div",{staticClass:"\n                taskGallery\n                p-d-flex p-flex-column p-jc-center p-ai-center\n              "},[t._m(8),t._v(" "),n("div",{staticClass:"customContainer"},[t.photos[0].length>0?n("CustomCarousel",{attrs:{photos:t.photos[0],background:"white",targetID:"CarouselDiagnostic"}}):t._e()],1)])]):t._e(),t._v(" "),"progress"===t.viewMode&&"Encerrada"===t.newTaskStatusName?n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-row p-jc-center p-ai-center p-mt-3\n            "},[n("div",{staticClass:"\n                taskGallery\n                p-d-flex p-flex-column p-jc-center p-ai-center\n              "},[t._m(9),t._v(" "),n("div",{staticClass:"customContainer"},[t.photos[1].length>0?n("CustomCarousel",{attrs:{photos:t.photos[1],background:"white",targetID:"CarouselResult"}}):n("div",[n("h2",[t._v("Fotos não anexadas...")])])],1)])]):t._e(),t._v(" "),"progress"===t.viewMode?n("div",{staticClass:"\n              frameGeneralInfo\n              p-d-flex p-flex-column p-jc-center p-ai-center p-mt-3\n            "},[t._m(10),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newTaskStatus.descricao,expression:"newTaskStatus.descricao"}],staticClass:"textInput",attrs:{type:"text",placeholder:"Insira aqui a descrição da sua tarefa...",id:"description"},domProps:{value:t.newTaskStatus.descricao},on:{input:function(e){e.target.composing||t.$set(t.newTaskStatus,"descricao",e.target.value)}}})]):t._e(),t._v(" "),"progress"===t.viewMode&&"Concluída"===t.newTaskStatusName?n("div",{staticClass:"inputElement p-d-flex p-flex-column p-jc-start p-ai-start"},[t._m(11),t._v(" "),n("FileUpload",{staticClass:"customFileUpload",attrs:{multiple:!0,accept:"image/jpeg,image/png",maxFileSize:1e7,id:"imageUpload",chooseLabel:"Adicionar fotos",uploadLabel:"Carregar fotos",cancelLabel:"Cancelar",fileLimit:10,invalidFileTypeMessage:"Formato da imagem inválido, formato deve ser JPG ou PNG!!!",invalidFileSizeMessage:"Tamanho da imagem excedido, limite é 10MB!",invalidFileLimitMessage:"Máximo de imagens anexadas é 10, diminua a quantidade de imagens!"},on:{upload:function(e){return t.savePhotoAWS(e)},uploader:t.myUploader},scopedSlots:t._u([{key:"empty",fn:function(){return[n("p",[t._v("\n                  Arraste as imagens desejadas aqui ou clique em 'Adicionar\n                  fotos'\n                ")])]},proxy:!0}],null,!1,1163709745)})],1):t._e(),t._v(" "),null!==this.task[0]&&null===this.task[0].idTarefaFK.dataFim?n("div",{staticClass:"\n              progressButtonsContainer\n              p-d-flex p-flex-row p-jc-center p-ai-center\n            "},["overview"===t.viewMode?n("Button",{staticClass:"btn-adv-progress",attrs:{label:"Avançar Tarefa"},on:{click:function(e){return t.progressTaskButton()}}}):t._e(),t._v(" "),"progress"===t.viewMode?n("Button",{staticClass:"btn-adv-progress",attrs:{label:"Voltar à ver Tarefa"},on:{click:function(e){return t.progressTaskButton()}}}):t._e()],1):t._e()])]),t._v(" "),n("div",{staticClass:"divisor"})]):t._e()]),t._v(" "),"progress"===t.viewMode?n("div",{staticClass:"buttons p-d-flex p-flex-row p-jc-evenly p-ai-center"},["Encerrada"===t.newTaskStatusName?n("Button",{staticClass:"btn-send",attrs:{label:"Aprovar"},on:{click:function(e){return t.progressTaskSubmit()}}}):n("Button",{staticClass:"btn-send",attrs:{label:"Salvar"},on:{click:function(e){return t.progressTaskSubmit()}}}),t._v(" "),"Encerrada"===t.newTaskStatusName?n("Button",{staticClass:"btn-clean",attrs:{label:"Declinar"}}):n("Button",{staticClass:"btn-clean",attrs:{label:"Cancelar"},on:{click:function(e){return t.cleanForm()}}})],1):t._e()])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"titulo p-d-flex p-flex-row p-jc-start p-ai-center"},[n("i",{staticClass:"pi pi-check-square"}),t._v(" "),n("h1",[t._v("Gerencie sua tarefa!")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"enviroment"}},[n("i",{staticClass:"pi pi-map-marker"}),n("strong",[t._v("Ambiente de Ensino")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"deadline"}},[n("i",{staticClass:"pi pi-calendar"}),n("strong",[t._v("Prazo")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"requester"}},[n("i",{staticClass:"pi pi-user"}),n("strong",[t._v("Solicitante")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"employee"}},[n("i",{staticClass:"pi pi-users"}),n("strong",[t._v("Responsáveis")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic p-ml-3",attrs:{for:"description"}},[n("i",{staticClass:"pi pi-info-circle"}),t._v(" "),n("strong",[t._v("Descrição da Tarefa")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"description"}},[n("i",{staticClass:"pi pi-camera"}),t._v(" "),n("strong",[t._v("Fotos Anexadas")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic p-ml-3",attrs:{for:"description"}},[n("i",{staticClass:"pi pi-clock"}),t._v(" "),n("strong",[t._v("Progresso da Tarefa")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"description"}},[n("i",{staticClass:"pi pi-camera"}),t._v(" "),n("strong",[t._v("DIAGNÓSTICO: Fotos Antes da Execução da Tarefa")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"description"}},[n("i",{staticClass:"pi pi-camera"}),t._v(" "),n("strong",[t._v("RESULTADO: Fotos Depois da Execução da Tarefa")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"description"}},[n("i",{staticClass:"pi pi-info-circle"}),n("strong",[t._v("Adicione algum comentário sobre este processo")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"lblBasic",attrs:{for:"imageUpload"}},[n("i",{staticClass:"pi pi-camera"}),n("strong",[t._v("Anexe fotos do seu trabalho")])])}],!1,null,"49378c70",null);e.default=component.exports;installComponents(component,{CustomCarousel:n(545).default})}}]);