(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{449:function(e,t,r){e.exports=r.p+"img/sgae.03350ec.png"},452:function(e,t,r){r(453)},453:function(e,t,r){"use strict";var o=r(5),n=r(4),l=r(16),d=r(6),c=r(44),f=r(15),h=r(139),m=r(21),v=r(75),x=r(140),R=r(275),w=r(14),_=r(55),C=w("replace"),k=RegExp.prototype,A=n.TypeError,S=d(x),y=d("".indexOf),F=d("".replace),E=d("".slice),U=Math.max,I=function(e,t,r){return r>e.length?-1:""===t?r:y(e,t,r)};o({target:"String",proto:!0},{replaceAll:function(e,t){var r,o,n,d,x,w,N,P,j,M=c(this),T=0,$=0,O="";if(null!=e){if((r=h(e))&&(o=m(c("flags"in k?e.flags:S(e))),!~y(o,"g")))throw A("`.replaceAll` does not allow non-global regexes");if(n=v(e,C))return l(n,e,M,t);if(_&&r)return F(m(M),e,t)}for(d=m(M),x=m(e),(w=f(t))||(t=m(t)),N=x.length,P=U(1,N),T=I(d,x,0);-1!==T;)j=w?m(t(x,T,d)):R(x,d,T,[],void 0,t),O+=E(d,$,T)+j,$=T+N,T=I(d,x,T+P);return $<d.length&&(O+=E(d,$)),O}})},465:function(e,t,r){"use strict";(function(e){var o=r(458),n=r.n(o);t.a={awsManager:function(){console.log("AWS S3 MANAGER RUNNING");var t={bucketName:e.env.NUXT_ENV_BUCKET_NAME,dirName:e.env.NUXT_ENV_DIR_NAME_USERS,region:e.env.NUXT_ENV_REGION,accessKeyId:e.env.NUXT_ENV_ACCESSKEY_ID,secretAccessKey:e.env.NUXT_ENV_SECRET_ACESSKEY_ID,s3Url:"https://"+e.env.NUXT_ENV_BUCKET_NAME+".s3.amazonaws.com"};return new n.a(t)}}}).call(this,r(174))},475:function(e,t,r){var content=r(536);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(10).default)("da0881da",content,!0,{sourceMap:!1})},535:function(e,t,r){"use strict";r(475)},536:function(e,t,r){var o=r(9)(!1);o.push([e.i,".logo_register_panel[data-v-65959ffa]{height:100vh;width:50%;background-color:#313131;color:#fff;overflow-y:hidden}.Registro_panel[data-v-65959ffa]{height:auto;min-height:100vh;max-height:100vh;width:50%;box-sizing:border-box;display:flex;padding:30px 0 20px}.Registro_panel .stars1[data-v-65959ffa],.Registro_panel .stars2[data-v-65959ffa],.Registro_panel .stars3[data-v-65959ffa]{display:none}.formulario_registro[data-v-65959ffa]{overflow-y:auto;box-sizing:border-box;width:100%;height:auto}.registerForm[data-v-65959ffa]{width:65%;height:auto;padding:20px;margin-bottom:20px;border:2px solid #dc3d3d;border-radius:3px;box-shadow:0 10px 13px -7px #000,5px 5px 15px 5px transparent}.registerForm[data-v-65959ffa]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.9);border-radius:10px;background-color:#ccc}.registerForm[data-v-65959ffa]::-webkit-scrollbar{width:12px;background-color:#f5f5f5}.registerForm[data-v-65959ffa]::-webkit-scrollbar-thumb{border-radius:10px;background-color:#d62929;background-image:-webkit-linear-gradient(90deg,transparent,rgba(0,0,0,.4) 50%,transparent,transparent)}#myTitle[data-v-65959ffa]{display:flex;align-items:center;justify-content:center;text-align:center;height:auto;margin-bottom:20px;font-size:28px;overflow-y:hidden}.inputRegisterContainer[data-v-65959ffa]{height:100%}.Registro[data-v-65959ffa]{height:auto;width:100%}img[data-v-65959ffa]{margin-top:0;align-items:center;display:flex;width:65%;height:45%}.formulario_registro .btn_enviar[data-v-65959ffa]{background-color:#dc3d3d;color:#fff;border:none;justify-content:center;align-self:center;text-align:center;align-items:center;display:flex;height:50px;width:600px;margin-top:20px;cursor:pointer}.formulario_registro .btn_enviar[data-v-65959ffa]:hover{background-color:#e05e5e}.formulario_registro .btn_enviar[data-v-65959ffa]:disabled{background-color:#d38f8f}.linksRegister[data-v-65959ffa]{font-size:14px}.linksRegister .backBtn[data-v-65959ffa]{width:100px;padding:0;margin:10px 0 0 5px}.linksRegister .resetPswBtnRegister[data-v-65959ffa]{width:165px;padding:0;margin:10px 5px 0 0}.linksRegister .p-button .p-button-icon-left[data-v-65959ffa]{margin:0!important;width:25px}.inputRegisterContainer[data-v-65959ffa]{display:flex;flex-direction:column;justify-content:center;position:relative;width:100%;line-height:34px}.inputComboRegister[data-v-65959ffa]{width:100%;min-width:100%}#customFileUpload[data-v-65959ffa]{display:none}.customFileUploadLabel[data-v-65959ffa]{display:inline-block;width:100%;background-color:#dc3d3d;color:#fff;text-align:center;cursor:pointer;border-radius:4px}.customFileUploadLabel[data-v-65959ffa]:hover{background-color:#f59993}.lblRegister #lblsenhaRegister[data-v-65959ffa]{width:100%;color:#d3d3d3}.p-input-icon-right i[data-v-65959ffa]{width:15px;display:flex;align-items:flex-end;justify-content:flex-end}#fullnameR[data-v-65959ffa],#mailR[data-v-65959ffa],#nameR[data-v-65959ffa],#phoneR[data-v-65959ffa],.basicInputRegisterR[data-v-65959ffa]{width:100%;border:0;border-bottom:2px solid #000;font-size:18px;box-shadow:none}#fullnameR[data-v-65959ffa]:focus,#fullnameR[data-v-65959ffa]:hover,#fullnameR[data-v-65959ffa]:valid,#mailR[data-v-65959ffa]:focus,#mailR[data-v-65959ffa]:hover,#mailR[data-v-65959ffa]:valid,#nameR[data-v-65959ffa]:focus,#nameR[data-v-65959ffa]:hover,#nameR[data-v-65959ffa]:valid,#phoneR[data-v-65959ffa]:focus,#phoneR[data-v-65959ffa]:hover,#phoneR[data-v-65959ffa]:valid,.basicInputRegisterR[data-v-65959ffa]:focus,.basicInputRegisterR[data-v-65959ffa]:hover,.basicInputRegisterR[data-v-65959ffa]:valid{outline:0;background-color:#fff;box-shadow:none;border-color:none}.dropdownRegister[data-v-65959ffa]{width:100%;overflow-x:visible}.dropdownRegister #cargo[data-v-65959ffa]{overflow-x:visible;box-shadow:none;border:0;border-bottom:1px solid #000;font-size:18px}.dropdownRegister #cargo[data-v-65959ffa]:hover{border-color:#c22a1f!important}.dropdownRegister #cargo .p-dropdown-panel[data-v-65959ffa]{border:1px solid #c22a1f}.dropdownRegister #cargo .p-dropdown-panel li[data-v-65959ffa]{padding:3px 10px}.dropdownRegister #cargo .p-dropdown-panel li[data-v-65959ffa]:hover{background-color:#f59993!important}html[data-v-65959ffa]{height:100vh;overflow:hidden}@media screen and (max-width:990px){.logo_register_panel h1[data-v-65959ffa]{max-width:80%;font-size:18px}.logo_register_panel p[data-v-65959ffa]{font-size:11px}.registerForm[data-v-65959ffa]{width:75%}.registerForm .linksRegister .backBtn[data-v-65959ffa]{font-size:12px}.registerForm .linksRegister .resetPswBtnRegister[data-v-65959ffa]{font-size:12px;width:125px}}@media screen and (max-width:806px){.logo_register_panel img[data-v-65959ffa]{width:65%;height:40%}.logo_register_panel h1[data-v-65959ffa]{font-size:18px}.registerForm[data-v-65959ffa]{width:82%}.registerForm .linksRegister .backBtn[data-v-65959ffa]{font-size:12px}.registerForm .linksRegister .resetPswBtnRegister[data-v-65959ffa]{font-size:12px;width:90px}}@media screen and (max-width:700px){.logo_register_panel h1[data-v-65959ffa]{max-width:80%;font-size:16px}.logo_register_panel p[data-v-65959ffa]{font-size:10px}.registerForm[data-v-65959ffa]{height:auto}}@media screen and (max-width:760px){h5[data-v-65959ffa],img[data-v-65959ffa]{display:none}.logo_register_panel[data-v-65959ffa]{display:none;width:0}.Registro_panel[data-v-65959ffa]{width:100%;overflow-y:hidden}}@media screen and (max-width:440px){.registerForm[data-v-65959ffa]{width:100%}}",""]),e.exports=o},564:function(e,t,r){"use strict";r.r(t);var o,n,l,d,c,f,h=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"\n      logo_register_panel\n      p-d-flex p-flex-column p-jc-center p-ai-center p-text-center\n    "},[o("img",{attrs:{src:r(449)}}),e._v(" "),o("h1",[e._v("Sistema de Gestão de Ambiente de Ensino")]),e._v(" "),o("p",[e._v("® Senai Roberto Mange")]),e._v(" "),o("div",{staticClass:"stars1"}),e._v(" "),o("div",{staticClass:"stars2"}),e._v(" "),o("div",{staticClass:"stars3"})])}],m=r(13),v=(r(11),r(56),r(18),r(50),r(452),r(54),r(40),r(80),r(89),r(36),r(31),r(35),r(66),r(465)),x=r(463),R={layout:"login",name:"register",data:function(){return{filesAccepted:["image/jpg","image/jpeg","image/png"],customFileMessage:"Sua foto aqui",btnInitialLabel:"Sua foto aqui",btnDisabled:!1,passwordConfirm:null,phoneFormated:null,userAuth:{username:null,password:null,email:null},userSec:[{nome:null,idUserFK:null,email:null,fone:null,ativo:!1,idNivelAcessoFK:null}],jobSelected:null,jobs:[],userPhoto:null,S3Client:null,toastBreakpoints:{"1800px":{width:"25%",height:"100px"},"1200px":{width:"35%",height:"100px"},"800px":{width:"45%",height:"100px"},"580px":{width:"70%",height:"100px"},"300px":{width:"90%",height:"100px"},"10px":{width:"100%",height:"100px"}}}},methods:{backPage:function(){this.$router.push("/")},resetPage:function(){this.$router.push("reset")},savePhotoAWS:(f=Object(m.a)(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.S3Client.uploadFile(this.userPhoto,t).then((function(e){console.log(e),r.postUsuario(e.location)})).catch((function(e){console.error(e),r.customFileMessage=r.btnInitialLabel,r.userPhoto=null,r.btnDisabled=!1}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)}),postUser:(c=Object(m.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.userAuth.username=this.userAuth.username.toString(),e.next=3,this.$axios.$post(this.$store.state.BASE_URL+"api/v1/users/",JSON.stringify(this.userAuth),{headers:{"Content-Type":"application/json"}}).then((function(e){e.email===t.userAuth.email?(console.log("email bateu!"),t.userSec[0].email=t.userAuth.email,t.userSec[0].idNivelAcessoFK=t.jobSelected.id,t.userSec[0].idUserFK=e.id,t.userSec[0].fone=t.phoneFormated.replaceAll("(","").replaceAll(")","").replaceAll(" ","").replaceAll("-",""),console.log(e),null===t.userPhoto?t.postUsuario(null):t.savePhotoAWS(e.id)):(console.log("Error:"),t.customFileMessage=t.btnInitialLabel,t.userPhoto=null,t.btnDisabled=!1)})).catch((function(e){console.log(e.response);var r="";if(e.response){var o=!1;e.response.data.password&&(e.response.data.password.map((function(e){r+="\n"+e})),o=!0),e.response.data.email&&(e.response.data.email.map((function(e){r+="\n"+e})),o=!0),o||(r="Erro: "+e.response.status,r+="\n"+e.response.statusText)}t.$toast.add({severity:"error",summary:r,life:3500}),t.btnDisabled=!1,t.customFileMessage=t.btnInitialLabel,t.userPhoto=null}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),postUsuario:(d=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new FormData).append("nome",this.userSec[0].nome),r.append("idUserFK",this.userSec[0].idUserFK),r.append("email",this.userSec[0].email),r.append("fone",this.userSec[0].fone),r.append("ativo",!1),r.append("idNivelAcessoFK",this.userSec[0].idNivelAcessoFK),null!=t&&r.append("image",t),console.log("formData"),console.log(r),this.$axios.$post(this.$store.state.BASE_URL+"cadastroUsuario/",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log("response",e),void 0!==e.msg&&o.$toast.add({severity:"success",summary:e.msg,life:3500}),o.btnDisabled=!1,o.customFileMessage=o.btnInitialLabel,o.userPhoto=null,setTimeout((function(){o.$router.push("/")}),3600)})).catch((function(e){o.$toast.add({severity:"error",summary:"Problema ao tentar registrar usuário",life:3500}),o.btnDisabled=!1,o.customFileMessage=o.btnInitialLabel,o.userPhoto=null,console.log(e)}));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)}),postPhoto:(l=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,o,n,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.files[0],console.log("postPhoto Event",r),o=!1,this.filesAccepted.map((function(e){r.type.includes(e)&&(o=!0)})),!1!==o){e.next=8;break}return console.log("TIPO NÃO SUPORTADO!"),this.$toast.add({severity:"error",summary:"Formato Inválido!",life:3500}),e.abrupt("return",!1);case 8:if(this.customFileMessage="Carregando...",console.log("ANTES DA FOTO!"),console.log("compressedFile instanceof Blob",r instanceof Blob),console.log("compressedFile size ".concat(r.size/1024/1024," MB")),!(r.size/1024/1024>4.5)){e.next=31;break}return n={maxSizeMB:4,maxWidthOrHeight:1920,useWebWorker:!0},e.prev=15,e.next=18,Object(x.a)(r,n);case 18:l=e.sent,console.log("compressedFile instanceof Blob",l instanceof Blob),console.log("compressedFile size ".concat(l.size/1024/1024," MB")),this.userPhoto=l,e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),console.log(e.t0),this.$toast.add({severity:"error",summary:"Erro ao Compactar Img!",life:3500}),this.customFileMessage=this.btnInitialLabel;case 29:e.next=32;break;case 31:this.userPhoto=r;case 32:this.$toast.add({severity:"success",summary:"Imagem Carregada!",life:3500}),this.userPhoto.name&&(this.userPhoto.name.length>20?this.customFileMessage="..."+this.userPhoto.name.slice(this.userPhoto.name.length-20):this.customFileMessage=this.userPhoto.name);case 35:case"end":return e.stop()}}),e,this,[[15,24]])}))),function(e){return l.apply(this,arguments)}),sendRegister:(n=Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("tentando registrar...."),this.userAuth.password===this.passwordConfirm?(this.btnDisabled=!0,this.postUser()):(this.$toast.add({severity:"error",summary:"Campos Senha e Confirmação de Senha não estão iguais",life:3500}),this.btnDisabled=!1);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),getJobs:(o=Object(m.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.jobs.length=0,e.next=3,this.$axios.get(this.$store.state.BASE_URL+"cargos").then((function(e){e.data.data.forEach((function(element){t.jobs.push({name:element.nome,id:element.id,level:element.nivelAcesso})}))}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},created:function(){this.$auth.$storage.removeUniversal("actualUserStoraged"),this.getJobs(),this.S3Client=v.a.awsManager()}},w=R,_=(r(535),r(2)),component=Object(_.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"Registro p-d-flex p-flex-row p-jc-center p-ai-center"},[r("Toast",{attrs:{position:"top-right",breakpoints:e.toastBreakpoints}}),e._v(" "),e._m(0),e._v(" "),r("section",{staticClass:"Registro_panel p-d-flex p-flex-column p-jc-center p-ai-center"},[r("div",{staticClass:"stars1"}),e._v(" "),r("div",{staticClass:"stars2"}),e._v(" "),r("div",{staticClass:"stars3"}),e._v(" "),r("div",{staticClass:"\n        formulario_registro\n        p-d-flex p-flex-column p-jc-center p-ai-center\n      "},[r("h1",{attrs:{id:"myTitle"}},[e._v("CADASTRE-SE")]),e._v(" "),r("form",{staticClass:"registerForm",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.sendRegister()}}},[r("div",{staticClass:"inputRegisterContainer"},[r("div",{staticClass:"inputComboRegister"},[r("label",{staticClass:"lblRegister",attrs:{for:"nameR"}},[e._v("USUÁRIO")]),e._v(" "),r("InputText",{staticClass:"basicInputRegisterR",attrs:{type:"number",id:"nameR",placeholder:"NIF ou Matrícula",minlength:"6",required:""},model:{value:e.userAuth.username,callback:function(t){e.$set(e.userAuth,"username",t)},expression:"userAuth.username"}})],1),e._v(" "),r("div",{staticClass:"inputComboRegister"},[r("label",{staticClass:"lblRegister",attrs:{for:"fullname"}},[e._v("NOME")]),e._v(" "),r("InputText",{staticClass:"basicInputRegisterR",attrs:{type:"text",id:"fullnameR",placeholder:"Nome Completo",required:""},model:{value:e.userSec[0].nome,callback:function(t){e.$set(e.userSec[0],"nome",t)},expression:"userSec[0].nome"}})],1),e._v(" "),r("div",{staticClass:"inputComboRegister"},[r("label",{staticClass:"lblRegister",attrs:{for:"mail"}},[e._v("EMAIL")]),e._v(" "),r("InputText",{staticClass:"basicInputRegisterR",attrs:{type:"email",id:"mailR",placeholder:"Email",required:""},model:{value:e.userAuth.email,callback:function(t){e.$set(e.userAuth,"email",t)},expression:"userAuth.email"}})],1),e._v(" "),r("div",{staticClass:"inputComboRegister field col-12 md:col-4"},[r("label",{staticClass:"lblRegister",attrs:{for:"phone"}},[e._v("CELULAR")]),e._v(" "),r("InputMask",{staticClass:"basicInputRegisterR",attrs:{mask:"(99) 99999-9999",id:"phoneR",placeholder:"(99) 9.9999-9999",required:""},model:{value:e.phoneFormated,callback:function(t){e.phoneFormated=t},expression:"phoneFormated"}})],1),e._v(" "),r("div",{staticClass:"inputComboRegister dropdownRegister"},[r("label",{staticClass:"lblRegister",attrs:{for:"cargo"}},[e._v("CARGO")]),e._v(" "),r("Dropdown",{attrs:{options:e.jobs,optionLabel:"name",placeholder:"Selecione o cargo",id:"cargo"},model:{value:e.jobSelected,callback:function(t){e.jobSelected=t},expression:"jobSelected"}})],1),e._v(" "),r("div",{staticClass:"inputComboRegister"},[r("label",{staticClass:"lblRegister",attrs:{for:"photo"}},[e._v("FOTO")]),e._v(" "),r("br"),e._v(" "),r("label",{staticClass:"customFileUploadLabel",attrs:{for:"customFileUpload"}},[e._v(e._s(e.customFileMessage))]),e._v(" "),r("input",{attrs:{id:"customFileUpload",type:"file",accept:".png, .svg, .jpg, .jpeg"},on:{change:function(t){return e.postPhoto(t.target)}}})]),e._v(" "),r("div",{staticClass:"inputComboRegister compPasswordRegister"},[r("label",{staticClass:"lblRegister",attrs:{for:"senhaRegister"}},[e._v("SENHA")]),e._v(" "),r("Password",{staticClass:"passInputRegister",attrs:{id:"senhaRegister",required:"",toggleMask:"",placeholder:"Senha"},model:{value:e.userAuth.password,callback:function(t){e.$set(e.userAuth,"password",t)},expression:"userAuth.password"}})],1),e._v(" "),r("div",{staticClass:"inputComboRegister compPasswordRegister"},[r("label",{staticClass:"lblRegister",attrs:{for:"senhaRegister2"}},[e._v("CONFIRME A SENHA")]),e._v(" "),r("Password",{staticClass:"passInputRegister",attrs:{id:"senhaRegister2",required:"",toggleMask:"",placeholder:"Confirme a Senha"},model:{value:e.passwordConfirm,callback:function(t){e.passwordConfirm=t},expression:"passwordConfirm"}})],1),e._v(" "),r("div",{staticClass:"linksRegister p-d-flex p-jc-between"},[r("Button",{staticClass:"backBtn p-button-text p-button-danger",attrs:{icon:"pi pi-arrow-left",label:"Voltar"},on:{click:function(t){return e.backPage()}}})],1),e._v(" "),r("button",{staticClass:"btn_enviar",attrs:{type:"submit",disabled:e.btnDisabled}},[e._v("\n            CADASTRAR\n          ")])])])])])],1)}),h,!1,null,"65959ffa",null);t.default=component.exports}}]);